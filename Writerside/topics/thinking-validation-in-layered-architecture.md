# レイヤードアーキテクチャでのバリデーションの考え方

各層に適したバリデーションを行うべき

## handler層(presentation層)

防御的バリデーション。

ユーザーから送られてきた値をバリデーションする
ただし、色々なところに重複した処理を記述する必要があるので、生産性が落ちる可能性がある

## domain層(business logic)

契約プログラミング。

以下の条件から成り立つ

- 事前条件
  - メソッド呼び出し時に、条件が満たされていること。
  - e.g. メソッドの引数がnullでないこと
- 事後条件
  - メソッド実装時に、条件が満たされていること
  - e.g. メソッド実行後に、値がマイナスではないこと
- 不変条件
  - オブジェクトの状態が、メソッド実行前後でオブジェクトが常に正しいこと
  - e.g. どんなメソッドを実行されても、オブジェクトが不正な状態にならないこと


